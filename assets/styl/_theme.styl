themes = {
  says: {
    SPORT:  '.SPORT'
    P09:    '.P09'
    ELSE:   '.ELSE'
    P07:    '.P07'
    ALIEN:  '.XSAY, .BSAY'
    P05:    '.P05'
    P04:    '.P04'
    BROAD:  '.SSAY, .MSAY'
    VBROAD: '.VSSAY, .VSAY'
    P01:    '.P01'
    WOLF:   '.WSAY'
    N01:    '.N01'
    N02:    '.N02'
    VLOVE:  '.AIM'
    LOVE:   '.SPSAY, .PSAY'
    N05:    '.N05'
    N06:    '.N06'
    VGRAVE: '.VGSAY'
    GRAVE:  '.GSAY'
    N09:    '.N09'
  }
  world: {
    BROAD:  '.public'
    GRAVE:  '.private'
  }
  manage: {
    SILVER: '.MAKER, .TITLE'
    GOLD:   '.ADMIN, .links, .btns'
  }
  pens: {
    SILVER:  '.chrblank'
    GOLD:    '.footer, .header'
  }
  stats: {
    SPORT:  '.HATER, .LONEWOLF'
    ELSE:   '.PIXI, .GURU'
    ALIEN:  '.EVIL'
    BROAD:  '.HUMAN, .DISH, .live, .juror'
    WOLF:   '.WOLF, .suicide, .victim, .cursed, .feared, .droop'
    LOVE:   '.LOVER'
    VBROAD: '.NONE, .MOB, .mob, .visiter, .grave, .alive'
    GRAVE:  '.executed'
    SILVER: '.TSAY, .suddendead, .leave, .hide'
  }
}


dark   =  hsla(0, 0%, 0%, 1)

ZZZ    =   hsla(0,62%, 8%,1)
black  =  hsla(60, 4%,10%,1)

OOO    =   hsla(0,79%,15%,1)
fude   = hsla(240, 8%,17%,1)

NNN    =   hsla(0,44%,40%,1)
lead   =  hsla(68, 5%,29%,1)
lead   =  hsla(68, 5%,30%,1)
earth  =  hsla(43,43%,30%,1)

gray   =  hsla(64, 7%,58%,1)
brass  =  hsla(52,47%,48%,1)

HHH    =  hsla(0,66%,75%,1)
silver =  hsla(0, 0%,75%,1)
gold   = hsla(50,90%,50%,1)

PPP    =   hsla(0,99%,47%,1)
snow   = hsla(180,86%,97%,1)
ivory  =  hsla(55,47%,92%,1)


hues = {
  SPORT:  10 * 18deg
  P09:     9 * 18deg
  ELSE:    8 * 18deg
  P07:     7 * 18deg
  ALIEN:   6 * 18deg
  P05:     5 * 18deg
  P04:     4 * 18deg
  BROAD:   3 * 18deg - 6deg
  VBROAD:  2 * 18deg
  P01:     1 * 18deg
  WOLF:    0
  N01:    -1 * 18deg
  N02:    -2 * 18deg + 5deg
  VLOVE:  -3 * 18deg
  LOVE:   -4 * 18deg
  N05:    -5 * 18deg
  N06:    -6 * 18deg
  VGRAVE: -7 * 18deg
  GRAVE:  -8 * 18deg
  N09:    -9 * 18deg
  SILVER:  8 * 18deg
  GOLD:    3 * 18deg - 4deg
}


saturates = {
  SPORT:  100%
  P09:     90%
  ELSE:    90%
  P07:     80%
  ALIEN:   90%
  P05:     90%
  P04:    100%
  BROAD:  100%
  VBROAD: 100%
  P01:    100%
  WOLF:   100%
  N01:    100%
  N02:    100%
  VLOVE:  110%
  LOVE:   120%
  N05:    140%
  N06:    140%
  VGRAVE: 140%
  GRAVE:  120%
  N09:    110%
  SILVER:  33%
  GOLD:    33%
}

lights = {
  SPORT:  100%
  P09:     95%
  ELSE:    95%
  P07:     90%
  ALIEN:   95%
  P05:     95%
  P04:    100%
  BROAD:  100%
  VBROAD: 100%
  P01:    100%
  WOLF:   100%
  N01:    100%
  N02:    100%
  VLOVE:  105%
  LOVE:   110%
  N05:    120%
  N06:    120%
  VGRAVE: 120%
  GRAVE:  110%
  N09:    105%
  SILVER: 100%
  GOLD:   100%
}


HSLA(key,S,L,AA)
  HH = hues[key]
  SS = S * saturates[key] / 100
  LL = L * lights[key]    / 100
  hsla(HH,SS,LL,AA)


palette($themes, $backT)
  for key, $bgTheme in themes[$themes]
    palette_single($bgTheme, $backT, hues[key], key)


palette_single($bgTheme, $backT, $hue, key)
  if metal == $backT
    $edge = $baloon = HSLA(key, 6%,66%,1)

    $hide = $emboss =     HSLA(key,10%,10%,1)
    $off = $active = spin(HSLA(key,10%,33%,1),-18deg)
    $on = $focus =   spin(HSLA(key,10%,33%,1),+18deg)

    $bg =   HSLA(key,10%,25%,1)
    $bgHi = HSLA(key,15%,25%,1)

    $pen =  HSLA(key, 6%,66%,1)

    $good = HSLA(ALIEN,33%,66%,1)
    $warn = HSLA(P01,  33%,66%,1)
    $ban =  HSLA(WOLF, 33%,66%,1)

  if foot == $backT
    $edge =           HSLA(key,40%,50%,1)
    $emboss =         HSLA(key,40%,35%,1)
    $off =            HSLA(key,30%,35%,1)
    $on =             HSLA(key,40%,45%,1)
    $focus =          HSLA(key,30%,45%,1)

    $hide =           HSLA(key,50%,10%,1)
    $bg = $baloon =   HSLA(key,35%,30%,1)
    $bgHi =           HSLA(key,75%,20%,1)

    $pen =  HSLA(key,  10%,80%,1)
    $good = HSLA(ALIEN,33%,66%,1)
    $warn = HSLA(P01,  33%,66%,1)
    $ban  = HSLA(WOLF, 33%,66%,1)

  if light == $backT
    $emboss = $edge = HSLA(key,40%,50%,1)
    $off =            HSLA(key,30%,50%,1)
    $on =             HSLA(key,40%,40%,1)
    $focus =          HSLA(key,30%,40%,1)

    $hide =           HSLA(key,75%,25%,1)
    $bg = $baloon =   HSLA(key,35%,63%,1)
    $bgHi =           HSLA(key,66%,70%,1)

    $pen =  HSLA(key,   0%,0%,1)
    $good = HSLA(ALIEN,66%,8%,1)
    $warn = HSLA(P01,  66%,8%,1)
    $ban =  HSLA(WOLF, 66%,8%,1)

  if black == $backT
    $edge =           HSLA(key,50%,30%,1)
    $emboss =         HSLA(key,40%,20%,1)
    $off =            HSLA(key,30%,20%,1)
    $on =             HSLA(key,40%,30%,1)
    $focus =          HSLA(key,30%,30%,1)

    $hide =           HSLA(key,44%,40%,1)
    $bg = $baloon =   HSLA(key,35%,15%,1)
    $bgHi =           HSLA(key,66%, 8%,1)

    $pen =  HSLA(SILVER,5%,80%,1)

    $good = HSLA(ALIEN,33%,66%,1)
    $warn = HSLA(P01,  33%,66%,1)
    $ban  = HSLA(WOLF, 33%,66%,1)

  if night == $backT
    $edge = $baloon = HSLA(key,99%,47%,1)

    $hide = $emboss =     HSLA(key,44%,40%,1)
    $off = $active = spin(HSLA(key,44%,40%,1),-18deg)
    $on = $focus =   spin(HSLA(key,44%,40%,1),+18deg)

    $bg =   HSLA(key,66%, 8%,1)
    $bgHi = HSLA(key, 0%, 0%,1)

    $pen =  HSLA(key,66%,75%,1)

    $good = HSLA(ALIEN,99%,47%,1)
    $warn = HSLA(P01,  99%,47%,1)
    $ban  = HSLA(WOLF, 99%,47%,1)

  {$bgTheme}
    &,
    textarea
      color:            $pen
      background-color: $bg
      border-color:     $edge

    &.baloon
      border-color: $baloon

    .fa-check
      color: $good
    .fa-warning
      color: $warn
    .fa-ban
      color: $ban

    kbd
      background-color: #000

    code
      background-color: $off

    input[type=checkbox],
    input[type=radio]
      background-color: $off
      &:checked,
      &.active,
      .active
        background-color: $on
      &:hover,
      &:focus
        background-color: $focus
      sup,
      sub
        background-color: $emboss
        color: $bgHi

    a,
    input,
    button
      background-color: $off
      &.active,
      .active
        background-color: $on
      &:hover,
      &:focus
        background-color: $focus
      sup,
      sub
        background-color: $emboss
        color: $bgHi

    [href],
    [title],
    [data-tooltip]
      color: $pen
      background-color: $off
      &:visited
        background-color: $off
      &:link
        background-color: $off
      &:hover,
      &:focus
        background-color: $focus
      &.nuxt-link-exact-active,
      &.active,
      .nuxt-link-exact-active,
      .active
        background-color: $on
      sup,
      sub
        background-color: $emboss
        color: $bgHi

    .name
      sup,
      sub
        background-color: $emboss
        color: $bgHi

    [title]:before,
    [title]:after,
    [data-tooltip]:before,
    [data-tooltip]:after
      color:            $pen
      background-color: $bgHi

    b,
    em
      color: $pen
      background-color: $bgHi

    h5,
    rt,
    abbr,
    strong
      background-color: $emboss
      color: $bgHi

    del,
    .name,
    .date
      color: $hide



