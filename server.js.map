{"version":3,"sources":["webpack:///webpack/bootstrap 3ab25644a57015f5aa57","webpack:///external \"child_process\"","webpack:///external \"config\"","webpack:///external \"fs\"","webpack:///external \"./api\"","webpack:///external \"lodash\"","webpack:///./api/index.coffee","webpack:///external \"express\"","webpack:///./api/base.coffee","webpack:///external \"body-parser\"","webpack:///./api/session.coffee","webpack:///external \"express-session\"","webpack:///external \"connect-mongo\"","webpack:///./api/agenda.coffee","webpack:///external \"agenda\"","webpack:///external \"agendash\"","webpack:///./api/jobs (.+)\\.coffee$","webpack:///./api/jobs/aggregate.coffee","webpack:///./api/jobs/process.coffee","webpack:///./api/mongoose.coffee","webpack:///external \"mongoose\"","webpack:///./api/mongoose (.+)\\.coffee$","webpack:///./api/mongoose/api.coffee","webpack:///external \"js-yaml\"","webpack:///./api/mongoose/book.coffee","webpack:///./api/mongoose/passport.coffee","webpack:///external \"passport\"","webpack:///external \"passport-facebook\"","webpack:///external \"passport-twitter\"","webpack:///external \"passport-slack\"","webpack:///external \"passport-github2\"","webpack:///external \"passport-google-oauth2\"","webpack:///./api/mongodb.coffee","webpack:///external \"mongodb-bluebird\"","webpack:///./api/nuxt.coffee","webpack:///./config/webpack/index.coffee","webpack:///./config/webpack/render.coffee","webpack:///./config/webpack/router.coffee","webpack:///./config/webpack/build.coffee","webpack:///external \"extract-text-webpack-plugin\"","webpack:///./config/webpack/head.coffee","webpack:///./config/webpack/env.coffee","webpack:///external \"nuxt\""],"names":[],"mappings":"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","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3ab25644a57015f5aa57","module.exports = require(\"child_process\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"child_process\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"config\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"config\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"./api\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"./api\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"lodash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash\"\n// module id = 4\n// module chunks = 0","express = require 'express'\napp = express()\nconf = require 'config'\n\n{ pm_id } = process.env\nObject.assign conf, { pm_id }\nprocess.on 'unhandledRejection', console.dir\n\n\nrequire(\"./base.coffee\")(app, conf)\nif conf.use_api\n  require(\"./session.coffee\" )(app, conf)\n  require(\"./agenda.coffee\"  )(app, conf)\n  require(\"./mongoose.coffee\")(app, conf)\n\n  # for only legacy jinrogiji\n  require(\"./mongodb.coffee\" )(app, conf)\n\nrequire(\"./nuxt.coffee\")(app, conf)\n\nhost = ( conf.host || '127.0.0.1' )\nport = ( conf.port || 4000 ) + (pm_id - 0 || 0)\n\napp.listen port, host\nconsole.log(\"Server is listening on http://#{host}:#{port}\")\n\n\n\n// WEBPACK FOOTER //\n// ./api/index.coffee","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 6\n// module chunks = 0","bodyParser = require 'body-parser'\n\nmodule.exports = (app, conf)->\n  app.use bodyParser.json()\n  app.use (req, res, next)->\n    res.header \"Access-Control-Allow-Origin\", \"*\"\n    res.header \"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept\"\n    next()\n\n\n\n\n// WEBPACK FOOTER //\n// ./api/base.coffee","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 8\n// module chunks = 0","session = require 'express-session'\nMongoStore = require('connect-mongo')(session)\n\ninterval = 7 * 24 * 3600\nday =          24 * 3600\n\nmodule.exports = (app, { session_key, db })->\n  app.use session\n    secret: session_key\n    resave: false\n    saveUninitialized: false\n    store: new MongoStore\n      url: db.mongo\n      ttl: interval\n      autoRemove: 'native'\n      collection: 'sessions'\n      touchAfter: day\n      stringify: false\n    cookie:\n      maxAge: interval * 1000\n  console.log \"session use #{db.mongo}\"\n\n\n\n// WEBPACK FOOTER //\n// ./api/session.coffee","module.exports = require(\"express-session\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-session\"\n// module id = 10\n// module chunks = 0","module.exports = require(\"connect-mongo\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"connect-mongo\"\n// module id = 11\n// module chunks = 0","Agenda = require \"agenda\"\nAgendash = require 'agendash'\n\njobs = (cb)->\n  ctx = require.context \"./jobs\", true, ///(.+)\\.coffee$///\n  for fname in ctx.keys()\n    name = fname[2..-8]\n    cb name, ctx fname\n\nmodule.exports = (app, { pm_id, db })->\n  pno = (pm_id - 1 || 0)\n  agenda = new Agenda\n    db:\n      address: db.mongo\n      collection: \"jobCollectionName\"\n      options:\n        server:\n          auto_reconnect: true\n\n  jobs (name, ctx)->\n    agenda.define name, ctx.define\n\n  agenda.on 'ready', ->\n    unless pno\n      jobs (name, ctx)->\n        if ctx.every\n          agenda.every ctx.every, name\n    agenda.start()\n\n  app.use '/agendash', Agendash agenda\n  console.log \"agenda use #{db.mongo}\"\n\n\n\n// WEBPACK FOOTER //\n// ./api/agenda.coffee","module.exports = require(\"agenda\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"agenda\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"agendash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"agendash\"\n// module id = 14\n// module chunks = 0","var map = {\n\t\"./aggregate.coffee\": 16,\n\t\"./process.coffee\": 17\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 15;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./api/jobs (.+)\\.coffee$\n// module id = 15\n// module chunks = 0","sh = require 'child_process'\n{ API_URL } = process.env\n\nmodule.exports =\n  every: '12 hours'\n  define: (job, done)->\n    sh.exec \"curl http:#{API_URL}/aggregate/job\", (err, stdout, stderr)->\n      sh.exec \"./static/sow.sh\", (err, stdout, stderr)->\n        if err\n          console.error err\n        else\n          console.log stderr\n\n\n\n// WEBPACK FOOTER //\n// ./api/jobs/aggregate.coffee","sh = require 'child_process'\n{ API_URL } = process.env\n\nmodule.exports =\n  every: '2 minutes'\n  define: (job, done)->\n    sh.exec 'ps uafxS | grep -v ^root', (err, stdout, stderr)->\n      if err\n        console.error err\n        console.error stderr\n      else\n        console.log stdout  \n\n\n\n// WEBPACK FOOTER //\n// ./api/jobs/process.coffee","mongoose = require \"mongoose\"\n\nmodule.exports = (app, conf)->\n  mongoose.connect conf.db.mongo,\n    config:\n      autoIndex: false\n  , (err)->\n    if err\n      console.error \"no #{conf.db.mongo}. disabled (passport, session)\"\n    else\n      console.log \"mongoose connected.\"\n\n  ctx = require.context \"./mongoose\", true, ///(.+)\\.coffee$///\n  for fname in ctx.keys()\n    ctx(fname)(app, mongoose, conf)\n\n  return\n\n\n\n// WEBPACK FOOTER //\n// ./api/mongoose.coffee","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 19\n// module chunks = 0","var map = {\n\t\"./api.coffee\": 21,\n\t\"./book.coffee\": 23,\n\t\"./passport.coffee\": 24\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 20;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./api/mongoose (.+)\\.coffee$\n// module id = 20\n// module chunks = 0","YAML = require \"js-yaml\"\nfs = require \"fs\"\n\nmodule.exports =\n  YAML: (path)-> YAML.load fs.readFileSync path, 'utf8'\n  API: (cb)-> (req, res, next)->\n    try\n      res.json await cb req\n    catch { name, message, stack, fileName, lineNumber }\n      res.json { name, message, stack, fileName, lineNumber }\n\n\n\n// WEBPACK FOOTER //\n// ./api/mongoose/api.coffee","module.exports = require(\"js-yaml\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"js-yaml\"\n// module id = 22\n// module chunks = 0","{ YAML, API } = require \"./api\"\n{ nation, village } = YAML \"yaml/rule.yml\"\n\nnrules = for { head }, idx in nation.list\n  \"#{idx + 1}. #{head}\"\n\nvrules = for { head }, idx in village.list\n  \"#{idx + 1}. #{head}\"\n\nmodule.exports = (app, m, { game: { folder_id }})->\n  { Schema } = m\n  Card = m.model 'Card', new Schema\n    write_at: Number\n\n    book_id:\n      type: String\n      index: true\n    part_id: String\n    role_id: String\n    idx: String\n    _id: String\n  ,\n    versionKey: false\n\n\n  Stat = m.model 'Stat', new Schema\n    write_at: Number\n\n    book_id:\n      type: String\n      index: true\n    role_id: String\n    idx: String\n    _id: String\n\n    sw: Boolean\n    give: Number\n  ,\n    versionKey: false\n\n\n  Potof = m.model 'Potof', new Schema\n    write_at: Number\n    open_at: Number\n\n    book_id:\n      type: String\n      index: true\n    passport_id: String\n    face_id: String\n    idx: String\n    _id: String\n\n    sign: String\n    job: String\n  ,\n    versionKey: false\n\n\n  IdxCount = m.model 'IdxCount', new Schema\n    idx: Number\n    _id: String\n  ,\n    versionKey: false\n\n\n  Book = m.model 'Book', new Schema\n    write_at: Number\n    open_at: Number\n\n    passport_id: String\n    folder_id: String\n    idx: String\n    _id: String\n\n    chat:\n      interval: Number\n      night: Number\n      player: Number\n      mob: Number\n    game:\n      vote: String\n      vote_by: [String]\n    tags: [String]\n    option: [String]\n    label: String\n  ,\n    versionKey: false\n\n\n  Part = m.model 'Part', new Schema\n    write_at: Number\n    open_at: Number\n\n    book_id:\n      type: String\n      index: true\n    idx: String\n    _id: String\n\n    label: String\n  ,\n    versionKey: false\n\n  \n\n  Phase = m.model 'Phase', new Schema\n    write_at: Number\n\n    book_id:\n      type: String\n      index: true\n    idx: String\n    _id: String\n\n    label: String\n    handle: String\n    group: String\n    update: false\n  ,\n    versionKey: false\n\n\n  Chat = m.model 'Chat', new Schema\n    write_at: Number\n\n    book_id:\n      type: String\n      index: true\n    potof_id:\n      type: [String]\n      index: true\n    phase_handle:\n      type: String\n      index: true \n    idx: String\n    _id: String\n\n    show: String\n    deco: String\n    log: String\n  ,\n    versionKey: false\n\n  must_signiture = ({ user })->\n    unless user?.sign?\n      throw new Error \"ログインしてください。\"\n\n  can_admin = ({ user, potof })->\n    unless potof?.idx == \"NPC\"\n      throw new Error \"ログインしてください。\"\n\n  up_for_tree = (model, o)->\n    write_at = new Date() - 0\n    o.open_at ?= write_at\n    Object.assign o, { write_at }\n    unless o._id\n      console.log o \n    await model.findByIdAndUpdate o._id, o,\n      new: true\n      upsert: true\n\n  add_for_tree = (_id, model, o)->\n    { idx } = await IdxCount.findByIdAndUpdate _id,\n      $inc:\n        idx: 1\n    ,\n      new: true\n      upsert: true\n    _id = \"#{_id}-#{idx}\"\n\n    Object.assign o, { idx, _id }\n    up_for_tree model, o\n\n  chk_book = ({ label })-> require_uniq Book, _id, { label, folder_id }\n\n  add_book  = (book)->           add_for_tree folder_id, Book,  book\n  add_potof = (book_id, potof)-> add_for_tree book_id,   Potof, potof\n  add_part  = (book_id, part)->  add_for_tree book_id,   Part,  part\n  add_phase = (part_id, phase)-> add_for_tree part_id,   Phase, phase\n  add_chat  = (phase_id, chat)-> add_for_tree phase_id,  Chat,  chat\n\n  up_potof = (potof)-> up_for_tree Potof, potof\n  up_stat  = (stat)->  up_for_tree Stat,  stat\n\n  up_book  = (book)->  up_for_tree Book,  book\n  up_part  = (part)->  up_for_tree Part,  part\n  up_phase = (phase)-> up_for_tree Phase, phase\n  up_chat  = (chat)->  up_for_tree Chat,  chat\n\n  up_chats_step_1 = (_id, npc_id)->\n    [\n      up_chat\n        _id: \"#{_id}-0-村題-welcome\"\n        idx: \"welcome\"\n        book_id: _id\n        potof_id: npc_id\n        deco: \"giji\"\n        show: \"report\"\n        log: \"（この村をみんなに紹介しよう）\"\n      up_chat\n        _id: \"#{_id}-0-村題-nrule\"\n        idx: \"nrule\"\n        book_id: _id\n        potof_id: npc_id\n        deco: \"giji\"\n        show: \"report\"\n        log: nrules.join(\"\\n\")\n      up_chat\n        _id: \"#{_id}-0-村題-vrule\"\n        idx: \"vrule\"\n        book_id: _id\n        potof_id: npc_id\n        deco: \"giji\"\n        show: \"report\"\n        log: vrules.join(\"\\n\")\n    ]\n\n  up_phases_step_1 = (_id)->\n    [\n      up_phase\n        _id: \"#{_id}-村題\"\n        idx: \"村題\"\n        label: '情報'\n        handle: 'MAKER'\n        update: true\n      up_phase\n        _id: \"#{_id}-独題\"\n        idx: \"独題\"\n        label: '情報'\n        handle: 'private'\n        update: false\n      up_phase\n        _id: \"#{_id}-独言\"\n        idx: \"独言\"\n        label: '独り言'\n        handle: 'TSAY'\n        update: false\n    ]\n\n  up_phases_step_2 = (_id)->\n    [\n      up_phase\n        _id: \"#{_id}-発題\"\n        idx: \"発題\"\n        label: '情報'\n        handle: 'public'\n        update: false\n      up_phase\n        _id: \"#{_id}-発言\"\n        idx: \"発言\"\n        label: '発言'\n        handle: 'SSAY'\n        update: false\n      up_phase\n        _id: \"#{_id}-見言\"\n        idx: \"見言\"\n        label: '発言'\n        handle: 'VSAY'\n        update: false\n      up_phase\n        _id: \"#{_id}-内言\"\n        idx: \"内言\"\n        label: \"内緒話\"\n        handle: \"AIM\"\n        update: false\n    ]\n\n  app.get '/api/books', API ->\n    books = await Book.find { _id: ///^#{folder_id}-/// }\n    { books }\n\n  app.get '/api/books/:book_id', API ({\n    params: { book_id }\n    query: { write_at }\n    session: { passport }\n  })->\n    _id =\n      $regex: ///^#{book_id}-///\n    [ book, potofs, stats, cards, parts, phases ] = await Promise.all [\n      Book.findById book_id\n\n      Potof.find { _id }\n      Stat.find  { _id }\n      Card.find  { _id }\n\n      Part.find  { _id }\n      Phase.find { _id }\n    ]\n    for potof in potofs when potof.passport_id == passport.user._id\n      passport.potof = potof\n\n    { book, potofs, stats, cards, parts, phases }\n\n  app.get '/api/books/:book_id/chats', API ({\n    params: { book_id }\n    query: { write_at }\n    session:\n      potof: potof\n      passport: { user }\n  })->\n    _id =\n      $regex: ///^#{book_id}-///\n    potof_id =\n      $in: [\n        potof?._id\n      ]\n    phase_handle =\n      $in: [\n        'SSAY', 'VSAY'\n        'GSAY', 'VGSAY'\n        'public'\n        'MAKER', 'ADMIN'  \n      ]\n    [ chats ] = await Promise.all [\n      Chat.find\n        _id: _id\n        $or: [{ potof_id }, { phase_handle }]\n    ]\n    { chats }\n\n  app.post '/api/books', API ({\n    body: { book }\n    session: { passport }\n  })->\n    must_signiture passport\n\n    book = { _id } = await add_book book\n    npc_id = \"#{_id}-NPC\"\n    [potof, part, chats, phases] = await Promise.all [\n      up_potof\n        _id: npc_id\n        idx: \"NPC\"\n        passport_id: passport.user._id\n        sign: passport.user.sign\n      up_part\n        _id: \"#{_id}-0\"\n        idx: \"0\"\n        label: 'プロローグ'\n      Promise.all up_chats_step_1 \"#{_id}-0\", npc_id\n      Promise.all up_phases_step_1 \"#{_id}-0\"\n    ]\n    passport.potof = potof\n\n    potofs = [potof]\n    parts  = [part]\n    { book, potofs, parts, phases, chats }\n\n  app.post '/api/books/:book_id', API ({\n    params: { book_id }\n    body: { book, potof }\n    session: { passport }\n  })->\n    must_signiture passport\n    can_admin passport\n\n    book._id = book_id\n    book = { _id, passport_id } = await up_book book\n    npc_id = \"#{_id}-NPC\"\n\n    Object.assign potof,\n      _id: \"#{_id}-NPC\"\n      idx: \"NPC\"\n      sign: passport.user.sign\n      passport_id: passport.user._id\n    [potof, chat, phases] = await Promise.all [\n      up_potof potof\n      up_chat\n        _id: \"#{_id}-0-発言-0\"\n        idx: \"0\"\n        book_id: _id\n        potof_id: npc_id\n        deco: \"giji\"\n        show: \"text\"\n        log: \"＠＠＠\"\n\n      Promise.all up_phases_step_2 \"#{_id}-0\"\n    ]\n    potofs = [potof]\n    chats  = [chat]\n    { book, potofs, chats, phases }\n\n\n  app.post '/api/books/:book_id/part', API ({\n    params: { book_id }\n    body: { part }\n    session: { passport }\n  })->\n    must_signiture passport\n    can_admin passport\n\n    [ part, ...phases ] = await Promise.all [\n      up_part part\n      ... up_phases_step_1 part._id\n      ... up_phases_step_2 part._id\n    ]\n    { part, phases }\n\n  app.post '/api/books/:book_id/potof', API ({\n    params: { book_id }\n    body: { potof, phase_id }\n    session: { passport }\n  })->\n    must_signiture passport\n    # can_player passport\n    potof = { _id } = await add_potof book_id, potof\n    args = await Promise.all [\n      up_stat\n        _id: \"#{_id}-SSAY\"\n        idx: \"SSAY\"\n        sw: false\n        give: 0\n      up_card\n        _id: \"#{_id}-request\"\n        idx: \"request\"\n        role_id: null\n      add_chat phase_id,\n        sign: potof.sign\n    ]\n    { potof, args }\n\n  app.delete '/api/book/:book_id', API ({\n    params: { book_id }\n    session:\n      passport: { user }\n  })->\n    book = await del_book book_id\n    { book }\n  \n  app.delete '/api/potof/:potof_id', API ({\n    params: { potof_id }\n    session:\n      passport: { user }\n  })->\n    potof = await del_potof potof_id\n    { potof }\n\n  app.post '/api/gm/muster', API ({\n    session:\n      passport: { user }\n  })->\n    args = await Promise.all [\n    ]\n    { args }\n\n  app.put '/api/potof/:book_id', API ({\n    params: { book_id }\n    body: { potof }\n    session:\n      passport: { user }\n  })->\n\n  app.put '/api/card',  API ({\n    body: { card }\n    session:\n      passport: { user }\n  })->\n\n  app.post '/api/gm/scrap', API ({\n    session:\n      passport: { user }\n  })->\n    args = await Promise.all [\n    ]\n    { args }\n\n\n\n// WEBPACK FOOTER //\n// ./api/mongoose/book.coffee","_ = require \"lodash\"\npassport = require \"passport\"\nplugins =\n  facebook: require \"passport-facebook\"\n  twitter:  require \"passport-twitter\"\n  slack:    require \"passport-slack\"\n  github:   require \"passport-github2\"\n  google:   require \"passport-google-oauth2\"\n\n{ API } = require \"./api\"\n\nmodule.exports = (app, m, { auth, url })->\n  { Schema } = m\n\n  Passport = m.model 'Passport', new Schema\n    _id: String\n    nick: String\n    icon: String\n    mail: String\n    sign: String\n\n    write_at: Number\n\n    provider: String\n    account: String\n    token: String\n\n  passport.serializeUser (o, done)->\n    o._id = [o.provider, o.account].join(\"-\")\n    Passport.findByIdAndUpdate o._id, o,\n      $setOnInsert:\n        sign: o.mail ? o.nick\n      new: false\n      upsert: true\n    .exec (err, o)->\n      done err, o\n\n  passport.deserializeUser (o, done)->\n    done null, o\n\n  app.use passport.initialize()\n  app.use passport.session()\n\n  app.post \"/api/user\", API ({\n    body,\n    session:\n      passport: { user }\n  })->\n    unless user?._id\n      return { message: \"ログインしていません。\" }\n    \n    Object.assign user, body.user\n    user = await Passport.findByIdAndUpdate user._id, user,\n      new: true\n      upsert: false\n    { user }\n\n  app.get \"/logout\", (req, res)->\n    req.logout()\n    res.redirect('/')\n\n  for provider, { attr, Strategy } of auth\n    { Strategy } = plugins[provider]\n    attr.callbackURL = \"#{url.web}/auth/#{provider}/callback\"\n\n    passport.use new Strategy attr, (accessToken, refreshToken, { provider, id, displayName, emails, photos }, done)->\n      profile =\n        icon: photos?[0].value\n        mail: emails?[0].value\n        nick: displayName\n        write_at: new Date - 0\n        provider: provider\n        account: id\n        token: accessToken\n\n      done null, profile\n      console.log \"passport-profile\", profile\n\n    app.get \"/auth/#{provider}\", passport.authenticate provider\n    app.get \"/auth/#{provider}/callback\", passport.authenticate provider,\n      failureRedirect: '/'\n      successRedirect: '/'\n    console.log \"#{provider} authenticate set.\"\n  return\n\n\n\n// WEBPACK FOOTER //\n// ./api/mongoose/passport.coffee","module.exports = require(\"passport\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport\"\n// module id = 25\n// module chunks = 0","module.exports = require(\"passport-facebook\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport-facebook\"\n// module id = 26\n// module chunks = 0","module.exports = require(\"passport-twitter\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport-twitter\"\n// module id = 27\n// module chunks = 0","module.exports = require(\"passport-slack\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport-slack\"\n// module id = 28\n// module chunks = 0","module.exports = require(\"passport-github2\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport-github2\"\n// module id = 29\n// module chunks = 0","module.exports = require(\"passport-google-oauth2\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport-google-oauth2\"\n// module id = 30\n// module chunks = 0","mongo = require \"mongodb-bluebird\"\nsh = require 'child_process'\nfs = require 'fs'\n_ = require \"lodash\"\n\nObjectId = false\n\ngiji = {}\n\nmodule.exports = (app, { url, db })->\n  mongo.connect db.mongo_sow\n  .then (db)->\n    end = (err, o)->\n      console.log err, o\n    giji.find = (id, query, projection)->\n      db.collection id, {ObjectId}\n      .find query, projection\n\n    giji.aggregate_message = ->\n      cmd = (out, keys, ext...)->\n        db.collection(\"message_by_story_for_face\", {ObjectId}).aggregate [\n          ext...\n        ,\n          $group:\n            _id: keys\n            date_min:\n              $min: \"$date_min\"\n            date_max:\n              $max: \"$date_max\"\n            max:\n              $max: \"$max\"\n            all:\n              $sum: \"$all\"\n            count:\n              $sum: \"$count\"\n            story_ids:\n              $addToSet: \"$_id.story_id\"\n        ,\n          $out: out\n        ], {ObjectId}\n\n      Promise.all [\n        cmd \"message_for_face\",\n          face_id: \"$_id.face_id\"\n        cmd \"message_for_face_sow_auth\",\n          face_id:     \"$_id.face_id\"\n          sow_auth_id: \"$_id.sow_auth_id\"\n        cmd \"message_for_face_mestype\",\n          face_id: \"$_id.face_id\"\n          mestype: \"$_id.mestype\"\n      ]\n\n\n    giji.aggregate_potof = ->\n      cmd = (out, keys, ext...)->\n        db.collection(\"potofs\", {ObjectId}).aggregate [\n          ext...\n        ,\n          $match:\n            sow_auth_id:\n              $exists: 1\n              $nin: [null, \"master\", \"admin\"]\n            face_id:\n              $exists: 1\n              $ne: null\n        ,\n          $group:\n            _id: keys\n            date_min:\n              $min: \"$timer.entrieddt\"\n            date_max:\n              $max: \"$timer.entrieddt\"\n            story_ids:\n              $addToSet: \"$story_id\"\n\n        ,\n          $out: out\n        ], {ObjectId}\n\n      Promise.all [\n        cmd \"potof_for_face\",\n          face_id: \"$face_id\"\n        cmd \"potof_for_face_live\",\n          face_id: \"$face_id\"\n          live: \"$live\"\n        cmd \"potof_for_face_sow_auth\",\n          face_id:     \"$face_id\"\n          sow_auth_id: \"$sow_auth_id\"\n        cmd \"potof_for_face_role\",\n          face_id: \"$face_id\"\n          role_id: \"$role\"\n        ,\n          $unwind: \"$role\"\n      ]\n\n    giji.aggregate_max = ->\n      db.collection(\"potof_for_face_sow_auth_max\", { ObjectId }).remove({})\n      .then ->\n        db.collection(\"potof_for_face_sow_auth\", { ObjectId }).aggregate [\n          $project:\n            _id: 1\n            count:\n              $size: \"$story_ids\"\n        ,\n          $group:\n            _id:\n              face_id: \"$_id.face_id\"\n            count:\n              $max: \"$count\"\n        ], {ObjectId}\n      .then (data)->\n        Promise.all data.map (o)->\n          giji.find \"potof_for_face_sow_auth\",\n            \"_id.face_id\": o._id.face_id\n            story_ids:\n              $size: o.count\n          .then (list)->\n            [top] = _.sortBy list, (a)-> a.date_min\n            o.date_min = top.date_min\n            o.date_max = top.date_max\n            o._id      = top._id\n            o\n      .then (data)->\n        db.collection(\"potof_for_face_sow_auth_max\", { ObjectId }).insert data\n\n    giji.oldlog = ->\n      db.collection(\"stories\", { ObjectId }).aggregate [\n        $match:\n          is_finish:\n            $eq: true\n      ,\n        $project:\n          _id: 1\n      ,\n        $group:\n          _id: null\n          story_ids:\n            $addToSet: \"$_id\"\n      ], {ObjectId}\n      .then ([o])->\n        data = for id in o.story_ids\n          dst = \"./static/sow/#{id}.json.gz\"\n          src = \"http:#{url.api}/story/oldlog/#{id}\"\n          \"\"\"  ls \"#{dst}\" || curl \"#{src}\" | gzip --stdout --best > \"#{dst}\"  \"\"\"\n\n        dst = \"./static/sow/index.json.gz\"\n        src = \"http:#{url.api}/story/oldlog\"\n        data.push \"\"\" curl \"#{src}\" | gzip --stdout --best > \"#{dst}\"  \"\"\"\n\n        dst = \"./static/aggregate/faces/index.json.gz\"\n        src = \"http:#{url.api}/aggregate/faces\"\n        data.push \"\"\" curl \"#{src}\" | gzip --stdout --best > \"#{dst}\"  \"\"\"\n\n        data.push \"\"\" gulp amazon:gz \"\"\"\n\n        fs.writeFile './static/sow.sh', data.join(\"\\n\") , (err)->\n          console.log err\n        false\n\n    giji.scan = ->\n      db.collection(\"message_by_story_for_face\", { ObjectId }).aggregate [\n        $group:\n          _id: null\n          story_ids:\n            $addToSet: \"$_id.story_id\"\n      ], {ObjectId}\n      .then ([o])->\n        list = o?.story_ids ? []\n        db.collection(\"stories\", { ObjectId }).aggregate [\n          $match:\n            _id:\n              $nin: list\n            is_finish:\n              $eq: true\n        ,\n          $project:\n            _id: 1\n        ,\n          $group:\n            _id: null\n            story_ids:\n              $addToSet: \"$_id\"\n        ], {ObjectId}\n      .then ([o])->\n        list = o?.story_ids ? []\n        console.log \"step B\"\n        console.log list\n        set_bases = for id in list\n          giji.set_base id\n        Promise.all set_bases\n\n    giji.set_base = (story_id)->\n      db.collection(\"messages\", { ObjectId }).aggregate [\n        $match:\n          story_id: story_id\n          sow_auth_id:\n            $exists: 1\n            $ne: null\n          face_id:\n            $exists: 1\n            $ne: null\n          logid:\n            $exists: 1\n            $ne: null\n          log:\n            $exists: 1\n            $ne: null\n      ,\n        $project:\n          sow_auth_id: 1\n          story_id: 1\n          face_id: 1\n          logid: 1\n          date: 1\n          size:\n            $strLenCP: \"$log\"\n      ,\n        $group:\n          _id:\n            sow_auth_id: \"$sow_auth_id\"\n            story_id: \"$story_id\"\n            face_id: \"$face_id\"\n            mestype:\n              $substr: [\"$logid\", 0, 2]\n          date_min:\n            $min: \"$date\"\n          date_max:\n            $max: \"$date\"\n          max:\n            $max: \"$size\"\n          all:\n            $sum: \"$size\"\n          count:\n            $sum: 1\n      ], {ObjectId}\n      .then (data)->\n        db.collection(\"message_by_story_for_face\").insert data\n\n  .catch ->\n    console.log \"!!! mongodb connect error !!!\"\n\n\n  app.get '/api/aggregate/job', (req, res, next)->\n    giji.scan()\n    .then ->\n      giji.aggregate_message()\n    .then ->\n      giji.aggregate_potof()\n    .then ->\n      giji.aggregate_max()\n    .then ->\n      giji.oldlog()\n    .then ->\n      res.json\n        started: true\n      next()\n    .catch (e)->\n      res.json e\n      next()\n\n  app.get '/api/aggregate/faces', (req, res, next)->\n    q = {}\n    Promise.all [\n      giji.find \"message_for_face\", q\n      giji.find \"potof_for_face\", q\n      giji.find \"potof_for_face_sow_auth_max\", q\n    ]\n    .then ([m_faces, faces, sow_auths])->\n      res.json { m_faces, faces, sow_auths }\n      next()\n    .catch (e)->\n      console.error req, e\n      next()\n\n  app.get '/api/aggregate/faces/:id', (req, res, next)->\n    { id } = req.params\n    q =\n      \"_id.face_id\": id\n    Promise.all [\n      giji.find \"message_for_face\", q\n      giji.find \"message_for_face_mestype\", q\n      giji.find \"message_for_face_sow_auth\", q\n      giji.find \"potof_for_face\", q\n      giji.find \"potof_for_face_role\", q\n      giji.find \"potof_for_face_live\", q\n    ]\n    .then ([m_faces, mestypes, sow_auths, faces, roles, lives])->\n      res.json { m_faces, mestypes, sow_auths, faces, roles, lives }\n      next()\n    .catch (e)->\n      console.error req, e\n      next()\n\n  app.get '/api/story/progress', (req, res, next)->\n    q =\n      is_epilogue: false\n      is_finish: false\n    fields =\n      comment:  0\n      password: 0\n    json = {}\n    giji.find \"stories\", q, fields\n    .then (data)->\n      json.stories = data\n      data.map (o)-> \"#{o._id}-0\"\n    .then (ids)->\n      giji.find \"events\",\n        _id:\n          $in: ids\n    .then (data)->\n      json.events = data\n    .then ->\n      res.json json\n      next()\n    .catch (e)->\n      console.error req, e\n      next()\n\n  app.get '/api/story/oldlog', (req, res, next)->\n    q =\n      is_epilogue: true\n      is_finish:   true\n    fields =\n      comment:  0\n      password: 0\n    Promise.all [\n      giji.find \"stories\", q, fields\n      giji.find \"potof_for_face\", {}\n    ]\n    .then ([stories, faces])->\n      res.json { stories, faces }\n      next()\n    .catch (e)->\n      console.error req, e\n      next()\n\n  app.get '/api/story/oldlog/:story_id', (req, res, next)->\n    { story_id } = req.params\n    fields =\n      password: 0\n    Promise.all [\n      giji.find \"stories\",  { _id: story_id, is_epilogue: true, is_finish: true}, fields\n      giji.find \"messages\", { story_id }\n      giji.find \"events\",   { story_id }\n      giji.find \"potofs\",   { story_id }\n    ]\n    .then ([stories, messages, events, potofs])->\n      unless stories.length\n        messages = events = potofs = []\n      res.json { stories, messages, events, potofs }\n      next()\n    .catch (e)->\n      console.error req, e\n      next()\n\n  return\n\n\n\n// WEBPACK FOOTER //\n// ./api/mongodb.coffee","module.exports = require(\"mongodb-bluebird\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongodb-bluebird\"\n// module id = 32\n// module chunks = 0","config = require '../config/webpack/index.coffee'\n# { Nuxt, Module, Renderer, Utils, Builder, Generator, Options } = require 'nuxt'\n{ Nuxt, Builder } = require 'nuxt'\n\nnuxt = new Nuxt config\n\nif config.dev\n  try\n    builder = new Builder nuxt\n    # builder = nuxt\n    builder.build()\n  catch err\n    console.error err\n    process.exit(1)\n\nmodule.exports = (app)->\n  app.use nuxt.render\n\n\n\n// WEBPACK FOOTER //\n// ./api/nuxt.coffee","module.exports =\n  dev: (process.env.NODE_ENV != 'production')\n  render: require(\"./render.coffee\")\n  router: require(\"./router.coffee\")\n  build:  require(\"./build.coffee\")\n  head: require(\"./head.coffee\")\n  env: require(\"./env.coffee\")\n\n  plugins: []\n  css: [\n    'element-ui/lib/theme-default/index.css'\n  ]\n  #####\n  # Customize the progress-bar color\n  #\n  loading:\n    color: '#3B8070'\n\n  modules: ['~/modules/coffeescript.js']\n\n\n\n// WEBPACK FOOTER //\n// ./config/webpack/index.coffee","module.exports =\n  static:\n    maxAge: '1y'\n    setHeaders: (res, path, stat)->\n      if /\\.json\\.gz$/.test path\n        { atime, mtime, ctime, size } = stat\n        console.log { mtime, size, path }\n        res.setHeader 'Content-Type', 'application/javascript'\n        res.setHeader 'Content-Encoding', 'gzip'\n\n  gzip:\n    threshold: 0\n  etag:\n    weak: true\n\n\n\n\n// WEBPACK FOOTER //\n// ./config/webpack/render.coffee","\n###\nconst scrollBehavior = (to, from, savedPosition) => {\n  // savedPosition は popState ナビゲーションでのみ利用できます\n  if (savedPosition) {\n    return savedPosition\n  } else {\n    let position = {}\n    // 子パスが見つからないとき\n    if (to.matched.length < 2) {\n      // ページのトップへスクロールする\n      position = { x: 0, y: 0 }\n    }\n    else if (to.matched.some((r) => r.components.default.options.scrollToTop)) {\n      // 子パスのひとつが scrollToTop オプションが true にセットされているとき\n      position = { x: 0, y: 0 }\n    }\n    // アンカーがあるときは、セレクタを返すことでアンカーまでスクロールする\n    if (to.hash) {\n      position = { selector: to.hash }\n    }\n    return position\n  }\n}\n###\n\nmodule.exports =\n  scrollBehavior: (to, from, savedPosition)->\n    book = (idx_limit, to, from)->\n      [from, to] = [from, to].map (o)->\n        name = o.params.mode || o.name\n        part = o.params.idx?.split(\"-\")[0..idx_limit].join(\"-\")\n        page = o.query.page\n        page = undefined if 'back' == page\n        \"#{name} #{part} #{page}\"\n\n      if from != to\n        console.log \"scroll to TOP (#{from} != #{to})\"\n        x: 0\n        y: 0\n\n    basic = (has_top, to)->\n      [from, to] = [from, to].map (o)->\n        o.path\n      switch\n        when from != to\n          console.log \"scroll to TOP (#{from} != #{to})\"\n          x: 0\n          y: 0\n        when has_top\n          console.log \"scroll to TOP (has scrollToTop)\"\n          x: 0\n          y: 0\n\n    switch\n      when savedPosition\n        console.log \"scroll restore\", savedPosition\n        savedPosition\n      when to.hash\n        console.log \"scroll to \" + to.hash\n        selector: to.hash\n      else\n        switch to.name\n          when \"sow-village-idx-mode\"\n            book  2, to, from\n          when \"sow-village-idx-anker\"\n            book  1, to, from\n          else\n            has_top = to.matched.some (r)-> r.components.default.options.scrollToTop\n            basic has_top, to, from\n\n\n\n// WEBPACK FOOTER //\n// ./config/webpack/router.coffee","ExtractTextPlugin = require 'extract-text-webpack-plugin'\n\nmodule.exports =\n  extend: (config, { isDev, isClient })->\n\n  publicPath: '//s3-ap-northeast-1.amazonaws.com/giji-assets/nuxt/dist/'\n\n  babel:\n    presets: [\n      \"vue-app\"\n      [ \"env\"\n        targets:\n          browsers: [\n            \"> 5%\"\n          ]\n        forceAllTransforms: true\n      ]\n    ]\n\n  vendor: [\n    'd3'\n    'axios'\n    'lodash'\n    'vee-validate'\n    '~/components/vue.coffee'\n    '~/plugins/memory-record.coffee'\n  ]\n\n  loaders: [\n    test: /\\.(png|jpe?g|gif|svg)$/\n    loader: 'url-loader'\n    query:\n      limit: 1000 # 1KO\n      name: 'img/[name].[hash:7].[ext]'\n  ,\n    test: /\\.(woff2?|eot|ttf|otf)(\\?.*)?$/\n    loader: 'url-loader'\n    query:\n      limit: 1000 # 1KO\n      name: 'fonts/[name].[hash:7].[ext]'\n  ]\n\n\n\n// WEBPACK FOOTER //\n// ./config/webpack/build.coffee","module.exports = require(\"extract-text-webpack-plugin\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"extract-text-webpack-plugin\"\n// module id = 38\n// module chunks = 0","#####\n# Headers of the page\n#\nhost = \"//s3-ap-northeast-1.amazonaws.com/giji-assets/nuxt\"\n\nmodule.exports =\n  title: '人狼議事'\n  meta: [\n    { charset: 'utf-8' }\n    { name: 'viewport', content: 'width=device-width, initial-scale=0.5, shrink-to-fit=no' }\n    { hid: 'description', content: \"Nuxt.js project\" }\n    { href: \"mailto:7korobi@gmail.com\" }\n  ]\n  link: [\n    { rel: 'manifest', href: '/manifest.json'}\n    { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' }\n    { href: \"mailto:7korobi@gmail.com\" }\n  ]\n  script: [\n    { src: host + '/monaco-editor/vs/loader.js', type: 'text/javascript', charset: 'utf8' }\n  ]\n\n\n\n// WEBPACK FOOTER //\n// ./config/webpack/head.coffee","\n{ url, game } = require 'config'\n\nmodule.exports = { url, game }\n\n\n\n// WEBPACK FOOTER //\n// ./config/webpack/env.coffee","module.exports = require(\"nuxt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nuxt\"\n// module id = 41\n// module chunks = 0"],"sourceRoot":""}